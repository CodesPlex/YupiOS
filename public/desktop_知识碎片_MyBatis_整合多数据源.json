{"data": "# MyBatis \u6574\u5408\u591a\u6570\u636e\u6e90\n\n> \u4f5c\u8005\uff1a[\u60f3\u98de\u5929\u7684\u732a\u5934](https://wx.zsxq.com/dweb2/index/footprint/818812488588112)\uff0c[\u7f16\u7a0b\u5bfc\u822a\u661f\u7403](https://wx.zsxq.com/dweb2/index/group/51122858222824) \u7f16\u53f7 9414\n\n\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u67e5\u8be2\u6765\u81ea\u591a\u4e2a\u5e93\u8868\u7684\u6570\u636e\u5185\u5bb9\uff0c\u4f46\u662f\u53c8\u4e0d\u60f3\u8d77\u591a\u4e2a\u670d\u52a1\uff0c\u53ef\u4ee5\u4e1a\u52a1\u9700\u8981\u8fd9\u4e9b\u6570\u636e\u90a3\u8be5\u600e\u4e48\u529e\u5462\uff1f\u90a3\u4e48\u5176\u5b9eMybatis \u662f\u652f\u6301\u6574\u5408\u591a\u6570\u636e\u6e90\uff0c\u5e76\u968f\u65f6\u8fdb\u884c\u5207\u6362\u3002\n\n## \u80cc\u666f\n\n\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u67e5\u8be2\u6765\u81ea\u591a\u4e2a\u5e93\u8868\u7684\u6570\u636e\u5185\u5bb9\uff0c\u4f46\u662f\u53c8\u4e0d\u60f3\u8d77\u591a\u4e2a\u670d\u52a1\uff0c\u53ef\u4ee5\u4e1a\u52a1\u9700\u8981\u8fd9\u4e9b\u6570\u636e\u90a3\u8be5\u600e\u4e48\u529e\u5462\uff1f\u90a3\u4e48\u5176\u5b9eMybatis \u662f\u652f\u6301\u6574\u5408\u591a\u6570\u636e\u6e90\uff0c\u5e76\u968f\u65f6\u8fdb\u884c\u5207\u6362\u3002\n\n## \u89e3\u51b3\n\n### \u5f15\u5165\u4f9d\u8d56\n\n\u9996\u5148\u5f15\u5165`dynamic-datasource-spring-boot-starter`\u4f9d\u8d56\n\n```xml\n<dependency>\n  <groupId>com.baomidou</groupId>\n  <artifactId>dynamic-datasource-spring-boot-starter</artifactId>\n  <version>${version}</version><!--\u7248\u672c\u53f7-->\n</dependency>\n```\n\n### \u914d\u7f6e\u6587\u4ef6\n\n```yaml\nmybatis-plus:\n  configuration:\n    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl\n    map-underscore-to-camel-case: true\n  mapper-locations: mapper/*.xml\n\nserver:\n  port: 8989\n\nspring:\n  datasource:\n    dynamic:\n      primary: master\n      strict: false\n      datasource:\n        master:\n          url: jdbc:mysql://localhost:3306/yuapi?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8&useSSL=false\n          username: root\n          password: root\n          driver-class-name: com.mysql.cj.jdbc.Driver\n        slave_1:\n          url: jdbc:mysql://localhost:3306/db_email?serverTimezone=Asia/Shanghai&useUnicode=true&characterEncoding=utf-8&useSSL=false\n          username: root\n          password: root\n          driver-class-name: com.mysql.cj.jdbc.Driver\n```\n\n#### \u914d\u7f6e\u65b9\u5f0f\n\n```yaml\n# \u591a\u4e3b\u591a\u4ece                      \u7eaf\u7cb9\u591a\u5e93\uff08\u8bb0\u5f97\u8bbe\u7f6eprimary\uff09                   \u6df7\u5408\u914d\u7f6e\nspring:                               spring:                               spring:\n  datasource:                           datasource:                           datasource:\n    dynamic:                              dynamic:                              dynamic:\n      datasource:                           datasource:                           datasource:\n        master_1:                             mysql:                                master:\n        master_2:                             oracle:                               slave_1:\n        slave_1:                              sqlserver:                            slave_2:\n        slave_2:                              postgresql:                           oracle_1:\n        slave_3:                              h2:                                   oracle_2:\n```\n\n### \u901a\u8fc7\u6ce8\u89e3\u5207\u6362\u6570\u636e\u6e90\n\n\u53ef\u4ee5\u901a\u8fc7`@DS`\u6ce8\u89e3\u8fdb\u884c\u6570\u636e\u6e90\u5207\u6362\n\n```java\n@Service\n@DS(\"master\")\npublic class InterfaceInfoServiceImpl extends ServiceImpl<InterfaceInfoMapper, InterfaceInfo> implements InterfaceInfoService {\n}\n@Service\n@DS(\"slave_1\")\npublic class TEmailServiceImpl extends ServiceImpl<TEmailMapper, TEmail> implements TEmailService {\n}\n```\n\n\u6ce8\u89e3\u7684\u5185\u5bb9\u5bf9\u5e94\u914d\u7f6e\u91cc\u7684\u540d\u79f0\u3002\n\n## \u7ea6\u5b9a\n\n1. \u672c\u6846\u67b6\u53ea\u505a \u5207\u6362\u6570\u636e\u6e90 \u8fd9\u4ef6\u6838\u5fc3\u7684\u4e8b\u60c5\uff0c\u5e76\u4e0d\u9650\u5236\u4f60\u7684\u5177\u4f53\u64cd\u4f5c\uff0c\u5207\u6362\u4e86\u6570\u636e\u6e90\u53ef\u4ee5\u505a\u4efb\u4f55CRUD\u3002\n2. \u914d\u7f6e\u6587\u4ef6\u6240\u6709\u4ee5\u4e0b\u5212\u7ebf _ \u5206\u5272\u7684\u6570\u636e\u6e90 \u9996\u90e8 \u5373\u4e3a\u7ec4\u7684\u540d\u79f0\uff0c\u76f8\u540c\u7ec4\u540d\u79f0\u7684\u6570\u636e\u6e90\u4f1a\u653e\u5728\u4e00\u4e2a\u7ec4\u4e0b\u3002\n3. \u5207\u6362\u6570\u636e\u6e90\u53ef\u4ee5\u662f\u7ec4\u540d\uff0c\u4e5f\u53ef\u4ee5\u662f\u5177\u4f53\u6570\u636e\u6e90\u540d\u79f0\u3002\u7ec4\u540d\u5219\u5207\u6362\u65f6\u91c7\u7528\u8d1f\u8f7d\u5747\u8861\u7b97\u6cd5\u5207\u6362\u3002\n4. .\u9ed8\u8ba4\u7684\u6570\u636e\u6e90\u540d\u79f0\u4e3a master \uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7 spring.datasource.dynamic.primary \u4fee\u6539\u3002\n5. \u65b9\u6cd5\u4e0a\u7684\u6ce8\u89e3\u4f18\u5148\u4e8e\u7c7b\u4e0a\u6ce8\u89e3\u3002\n6. DS\u652f\u6301\u7ee7\u627f\u62bd\u8c61\u7c7b\u4e0a\u7684DS\uff0c\u6682\u4e0d\u652f\u6301\u7ee7\u627f\u63a5\u53e3\u4e0a\u7684DS\uff0c\u5728\u65b9\u6cd5\u4e0a\u9762\u6807\u8bb0\u4f18\u5148\u7ea7\u9ad8\u4e8e\u5728\u7c7b\u4e0a\u6807\u8bb0\u3002\n\n> \u6ce8\u610f\u8fd9\u4e2a\u539f\u7406\u4e5f\u662f\u57fa\u4e8eAOP,\u6240\u4ee5\u5728\u4e00\u4e2a\u65b9\u6cd5\u5185\u662f\u4e0d\u53ef\u4ee5\u5207\u6362\u6570\u636e\u6e90\u7684\u3002"}