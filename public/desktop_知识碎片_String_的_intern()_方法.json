{"data": "# String \u7684 intern() \u65b9\u6cd5\n\n> \u4f5c\u8005\uff1a[\u5c0f\u4f55\u540c\u5b66](https://wx.zsxq.com/dweb2/index/footprint/185541482828452)\uff0c[\u7f16\u7a0b\u5bfc\u822a\u661f\u7403](https://wx.zsxq.com/dweb2/index/group/51122858222824) \u7f16\u53f7 18055\n\n> \u6765\u6e90\uff1a\u5728\u4f7f\u7528\u5bf9\u79d2\u6740\u5238**\u4e00\u4eba\u4e00\u5355**\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u7528**\u60b2\u89c2\u9501**\u7528\u5230`synchronized (id.toString().intern()){}`\uff0c\u5b9e\u73b0\u6839\u636e\u7528\u6237id\u52a0\u9501\n\n## \u95ee\u9898\uff1a\n\n1. String s1 = \u201ca\u201d + \u201cb\u201d; //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n2. String s2 = new String(\u201cab\u201d); //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n3. String s3 = new String(\u201ca\u201d) + new String(\u201cb\u201d); //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n4. String s4= new String(\u201ca\u201d) + new String(\u201ca\u201d); s4.intern(); //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n\n## \u5173\u4e8eintern()\uff1a\n\nString.intern()\u65b9\u6cd5\u662f**\u4e00\u79cd\u624b\u52a8\u5c06\u5b57\u7b26\u4e32\u52a0\u5165\u5e38\u91cf\u6c60**\u4e2d\u7684\u65b9\u6cd5\uff0c\u5982\u679c\u6709\u5219\u8fd4\u56de\uff0c\u6ca1\u6709\u5219\u662fJDK\uff17\u4ee5\u53caJDK\u524d\u7684\u533a\u522b\n\n### \uff081\uff09JDK7\u524d\uff1a\n\nString\u8c03\u7528intern()\u65b9\u6cd5\u65f6\u56de\u53bb\u627e\u5e38\u91cf\u6c60\u662f\u5426\u5b58\u5728\u5f53\u524d\u5185\u5bb9\uff0c \u5982\u679c\u4e0d\u5b58\u5728\u4f1a\u5728\u5e38\u91cf\u6c60\u4e2d\u521b\u9020\u5bf9\u8c61\u5e76\u505a\u5f15\u7528 \u5982\u679c\u5b58\u5728\u5219\u76f4\u63a5\u8fd4\u56de\n\n**\u539f\u7406**\uff1aJDK6\u4e2d\u5e38\u91cf\u6c60\u4f4d\u4e8ePermGen\uff08\u6c38\u4e45\u4ee3\uff09\u4e2d\uff0cPermGen\u662f\u4e00\u5757\u4e3b\u8981\u7528\u4e8e\u5b58\u653e\u5df2\u52a0\u8f7d\u7684\u7c7b\u4fe1\u606f\u548c\u5b57\u7b26\u4e32\u6c60\u7684\u5927\u5c0f\u56fa\u5b9a\u7684\u533a\u57df\uff0c\u56e0\u6b64\u5f53\u65e0\u7528\u7684\u5bf9\u8c61\u5b58\u50a8\u591a\u540e\u5bb9\u6613\u6808\u6ea2\u51fa\u3002\u53e6\u5916\u95ee\u9898\u662f\u5806\u533a\u548cPermGen\u9694\u79bb\uff0c\u5bb9\u6613\u521b\u5efa\u591a\u4e2a\u76f8\u540c\u503c\u5bf9\u8c61\u3002\n\n### \uff082\uff09JDK7\n\nJdk7\u5c06\u5e38\u91cf\u6c60\u4ecePermGen\u533a\u79fb\u5230\u4e86Java\u5806\u533a\uff0c\u6267\u884cintern\u64cd\u4f5c\u65f6\uff0c\u5982\u679c\u5e38\u91cf\u6c60**\u5df2\u7ecf\u5b58\u5728**\u8be5\u5b57\u7b26\u4e32\uff0c\u5219\u76f4\u63a5\u8fd4\u56de\u5b57\u7b26\u4e32\u5f15\u7528\uff0c**\u5426\u5219**\u590d\u5236\u8be5\u5b57\u7b26\u4e32\u5bf9\u8c61\u7684\u5f15\u7528\u5230\u5e38\u91cf\u6c60\u4e2d\u5e76\u8fd4\u56de\u3002\n\n\u56de\u5230\u5f00\u59cb\u7684\u95ee\u9898\uff1a\n\n1. String s1 = \u201ca\u201d + \u201cb\u201d; //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n\n- \u6700\u591a\u4e00\u4e2a\u3002\u4f1a\u88ab\u4f18\u5316\u4e3a\"ab\"\uff0c\u7136\u540e\u5bfb\u627e\u5e38\u91cf\u6c60\u662f\u5426\u5b58\u5728\"ab\"\uff0c\u4e0d\u5b58\u5728\u5219\u521b\u5efa\u5bf9\u8c61\n\n1. String s2 = new String(\u201cab\u201d); //\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n\n- \u4e00\u4e2a\u6216\u4e24\u4e2a\u3002new\u65f6\u5728\u5806\u533a\u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5982\u679c\u5728\u5e38\u91cf\u6c60\u4e0d\u5b58\u5728\"ab\"\u5219\u5728\u5e38\u91cf\u6c60\u518d\u521b\u5efa\u4e00\u4e2a\n\n1. String s3 = new String(\u201ca\u201d) + new String(\u201cb\u201d);\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n\n- \u81f3\u5c114\u4e2a\uff0c\u6700\u591a6\u4e2a\u3002\n\n\u9996\u5148new\u4e24\u4e2a\u5bf9\u8c61\uff0cString\u7684\u52a0\u6cd5\u4f1anew\u4e00\u4e2aStringBuilder\uff0c\u7136\u540etoString()\u5e95\u5c42\u4f1anew\u4e00\u4e2aString \u53e6\u5916\u53ef\u80fd\u4f1a\u5728\u5e38\u91cf\u6c60\u521b\u5efa\"a\"\uff0c\"b\"\n\n1. String s4= new String(\u201ca\u201d) + new String(\u201cb\u201d);s3.intern();\u521b\u5efa\u4e86\u51e0\u4e2a\u5bf9\u8c61\uff1f\n\n- \u81f3\u5c114\u4e2a\uff0c\u6700\u591a7\u4e2a\n\n\u540c\u6837\u4e24\u4e2anew\uff0c\u4e00\u4e2aStringBuilder\uff0c\u4e00\u4e2atoString()\uff0c\"a\"\uff0c\"b\"\u53ef\u80fd\u5728\u5e38\u91cf\u6c60\u521b\u5efa \u6700\u540e**\u8c03\u7528intern()**\u65b9\u6cd5\u65f6\u5019\uff0c\u4f1a\u53bb\u5224\u65ad\"ab\"\u662f\u5426\u5b58\u5728 JDK7\u4e4b\u524d\uff1a\u4e0d\u5b58\u5728\u4f1a\u5728\u5e38\u91cf\u6c60new\u4e00\u4e2a\u5bf9\u8c61 JDK7\uff1a\u53ea\u521b\u5efa\"ab\"\u5f15\u7528\uff0c\u5e76\u6307\u5411\u5806\u533a\"ab\"\u7684StringBuilder\u5bf9\u8c61\u5730\u5740"}