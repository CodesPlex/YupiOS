{"data": "# \u963f\u91cc\u4e91\u5bf9\u8c61\u5b58\u50a8 OSS\n\n> \u4f5c\u8005\uff1a[agency](https://wx.zsxq.com/dweb2/index/footprint/418552142185588)\uff0c[\u7f16\u7a0b\u5bfc\u822a\u661f\u7403](https://wx.zsxq.com/dweb2/index/group/51122858222824) \u7f16\u53f7 17494\n\n## 1 \u5728\u5b98\u7f51\u6ce8\u518c\u8d26\u53f7\n\n\u5b98\u7f51\u5730\u5740\uff1a[https://home.console.aliyun.com/](https://home.console.aliyun.com/)\n\n## 2 \u5728\u5b98\u7f51\u4ea7\u54c1\u4e2d\u5f00\u542f\u5bf9\u8c61\u5b58\u50a8 oss\n\u7b2c\u4e00\u6b21\u4f7f\u7528\u4f1a\u5148\u5f00\u542f\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u7528\u91cf\u5c0f\u662f\u514d\u8d39\u4f7f\u7528\u7684<br />![](https://pic.yupi.icu/5563/202311271521997.png)\n\n\n## 3 \u521b\u5efa\u4e00\u4e2a\u5bf9\u8c61\u5b58\u50a8\u7a7a\u95f4 bucket\n![](https://pic.yupi.icu/5563/202311271521351.png)<br />\u5b9a\u4e49\u4e0d\u53ef\u91cd\u590d\u7684\u540d\u5b57\uff0c\u9009\u62e9\u672c\u5730\u5197\u4f59\u5b58\u50a8\uff08\u7701\u6d41\uff09<br />![](https://pic.yupi.icu/5563/202311271521104.png)<br />\u67e5\u770b\u5b58\u50a8\u7a7a\u95f4\u5217\u8868<br />![](https://pic.yupi.icu/5563/202311271521534.png)\n<a name=\"Oe4AO\"></a>\n\n## 4 \u83b7\u53d6\u4e0a\u4f20\u5bc6\u94a5\n![](https://pic.yupi.icu/5563/202311271522693.png)\n\n<br />\u81ea\u5df1\u751f\u6210\u4e00\u4e2a\u5373\u53ef\n\n## 5 \u4e0a\u4f20\u6587\u4ef6\u6d4b\u8bd5\n\u5b98\u7f51\u4e2d\u6709\u8be6\u7ec6\u6559\u7a0b\uff0c\u4ee5\u8868\u5355\u4e0a\u4f20\u4e3a\u4f8b<br />[https://help.aliyun.com/zh/oss/developer-reference/form-upload-1?spm=a2c4g.11186623.0.0.46cb6d86hqmZRz](https://help.aliyun.com/zh/oss/developer-reference/form-upload-1?spm=a2c4g.11186623.0.0.46cb6d86hqmZRz)<br />![](https://pic.yupi.icu/5563/202311271523883.png)\n\n\n#### 5.1 \u8fdb\u884c Java \u5b89\u88c5\u53ca\u521d\u59cb\u5316\n\u5f15\u5165pom \u4f9d\u8d56\n```java\n<dependency>\n    <groupId>com.aliyun.oss</groupId>\n    <artifactId>aliyun-sdk-oss</artifactId>\n    <version>3.10.2</version>\n</dependency>\n```\n\u914d\u7f6e\u5bc6\u94a5\u53c2\u6570\n```java\noss:\n  aliyun:\n    endpoint: oss-cn-beijing.aliyuncs.com #Bucket\u6240\u5728\u5730\u57df\u5bf9\u5e94\u7684Endpoint\n    accessKeyId:  #\u586b\u5199\u81ea\u5df1\u7684keyId\n    accessKeySecret: #\u586b\u5199\u81ea\u5df1\u7684KeySecret\n    bucket:  huimin-code #\u5b58\u50a8\u7a7a\u95f4\u5217\u8868\u540d\u79f0\n    domain: https://huimin-code.oss-cn-beijing.aliyuncs.com/ #\u4ee5\u5317\u4eac\u4e3a\u4f8b,\u8fd4\u56de\u524d\u7aef\u7528\u4e8e\u7ec4\u5408\u6587\u4ef6\n```\n\u914d\u7f6e\u5e76\u521b\u5efa OssClient\uff0c\u4e5f\u53ef\u6839\u636e\u5b98\u7f51\u6559\u7a0b\u6765\n```java\n@Configuration\npublic class OssAC {\n    @Value(\"${oss.aliyun.endpoint}\")\n    public String ENDPOINT;\n    @Value(\"${oss.aliyun.bucket}\")\n    public static  String BUCKET;\n    @Value(\"${oss.aliyun.domain}\")\n    public static  String DOMAIN;\n    @Value(\"${oss.aliyun.accessKeyId}\")\n    public  String ACCESSKEY_ID;\n    @Value(\"${oss.aliyun.accessKeySecret}\")\n    public  String ACCESSKEY_SECRET;\n\n    //\u521d\u59cb\u5316OSS\n    @Bean\n    public OSS oss(){\n        return new OSSClientBuilder().build(ENDPOINT,ACCESSKEY_ID, ACCESSKEY_SECRET);\n    }\n}\n```\n\n#### 5.2 \u4e0a\u4f20\u6587\u4ef6\u6d4b\u8bd5\uff0c\u8868\u5355\u4e0a\u4f20\n```java\n    //\u4e0a\u4f20\u8bc1\u4ef6\u7167\n    @ApiOperation(\"\u4e0a\u4f20\u8bc1\u4ef6\u7167\")\n    @PostMapping(\"/upload\")\n    public String upload2(@RequestParam(\"file\") MultipartFile multipartFile){\n        try {\n            InputStream inputStream = multipartFile.getInputStream();\n            //\u83b7\u53d6\u4e0a\u4f20\u6587\u4ef6\u540d\u79f0\n            String fullename =multipartFile.getOriginalFilename();\n            //\u622a\u53d6\u6587\u4ef6\u6269\u5c55\u540d\n            String ext = fullename.substring(fullename.lastIndexOf(\".\"));\n            //\u81ea\u5b9a\u4e49\u6587\u4ef6\u540d\u79f0\n            String fileName = System.currentTimeMillis()+ext;\n            // \u7ec4\u5408\u963f\u91cc\u4e91OSS\u4e0a\u4f20\u53c2\u6570  \u4f9d\u6b21\u4e3a \u5b58\u50a8\u7a7a\u95f4\u540d\uff0c\u6587\u4ef6\u540d\uff08\u53ef\u4ee5\u5305\u62ec\u6587\u4ef6\u5939\uff09,\u6587\u4ef6\u6d41\n            // \u6ce8\u610f\u5bf9\u8c61\u5b58\u50a8\u6ca1\u6709\u6587\u4ef6\u5939\u6982\u5ff5\uff0c\u5982\u679c\u8981\u533a\u5206\u6587\u4ef6\u53ef\u4ee5\u518d\u6587\u4ef6\u540d\u52a0/  eg:/2021/04/16/202111222555.png\n            PutObjectRequest putObjectRequest = new PutObjectRequest(BUCKET,fileName,inputStream);\n            // \u4e0a\u4f20\n            oss.putObject(putObjectRequest);\n            return DOMAIN+fileName;\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n```\n\u4f7f\u7528 postman \u8fdb\u884c\u6d4b\u8bd5\uff0c\u8981\u9009\u62e9 post \u8bf7\u6c42\uff0c\u8868\u5355\u5f62\u5f0f\u63d0\u4ea4\uff0c\u4e0a\u4f20\u6587\u4ef6\uff0c<br />![](https://pic.yupi.icu/5563/202311271523558.png)<br />\u8fd4\u56de\u5730\u5740\uff0c\u53ef\u4ee5\u590d\u5236\u5730\u5740\u5728\u6d4f\u89c8\u5668\u8f93\u5165\u67e5\u770b\uff0c**\u5982\u679c\u662f\u62a5\u6ca1\u6743\u9650\u7684\u9519\u8bef**\uff0c\u8fdb\u884c\u4e0b\u9762\u8bbe\u7f6e\uff0c<br />![](https://pic.yupi.icu/5563/202311271523743.png)\n\n"}